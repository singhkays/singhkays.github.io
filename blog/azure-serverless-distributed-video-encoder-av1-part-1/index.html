<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure - KAY SINGH</title>

<meta name="description" content="This is a 3-part blog covering how to build a scalable shot-based serverless video encoder in Azure. In Part 1, I explain what AV1 is and where we are in the video encoding space. In part 2, we create a logic app to upload and index the video. In part 3, we&rsquo;ll need to split the video into its scenes and encode individual scenes. For reference, here are the links to all the parts:">
<meta name="keywords" content= />
<meta name="author" content="Kay Singh">
<link rel="canonical" href="https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/" />


<link href="https://singhkays.com/assets/css/stylesheet.min.5e0fda86b96d682f879ad3a802bd67b0929c55231b5f231607a0d9f27aec8694.css" integrity="sha256-Xg/ahrltaC&#43;HmtOoAr1nsJKcVSMbXyMWB6DZ8nrshpQ=" rel="preload stylesheet"
    as="style">




<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">

<meta name="generator" content="Hugo 0.80.0" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-108462543-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/./media/serverless-av1.png"/>
<meta name="twitter:title" content="Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure"/>
<meta name="twitter:description" content="This is a 3-part blog covering how to build a scalable shot-based serverless video encoder in Azure. In Part 1, I explain what AV1 is and where we are in the video encoding space. In part 2, we create a logic app to upload and index the video. In part 3, we&rsquo;ll need to split the video into its scenes and encode individual scenes. For reference, here are the links to all the parts:"/>

<meta property="og:title" content="Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure" />
<meta property="og:description" content="This is a 3-part blog covering how to build a scalable shot-based serverless video encoder in Azure. In Part 1, I explain what AV1 is and where we are in the video encoding space. In part 2, we create a logic app to upload and index the video. In part 3, we&rsquo;ll need to split the video into its scenes and encode individual scenes. For reference, here are the links to all the parts:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/" />

    
        
        
        
            <meta name="og:image" content="https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/./media/serverless-av1.png"/>
        
    


    
        <meta property="article:published_time" content="2019-06-20T00:00:00&#43;00:00"/>
    
    
        <meta property="article:modified_time" content="2019-06-20T00:00:00&#43;00:00"/>
    




    <meta property="og:site_name" content="Kay&#39;s Blog" />







    



<meta itemprop="name" content="Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure">
<meta itemprop="description" content="This is a 3-part blog covering how to build a scalable shot-based serverless video encoder in Azure. In Part 1, I explain what AV1 is and where we are in the video encoding space. In part 2, we create a logic app to upload and index the video. In part 3, we&rsquo;ll need to split the video into its scenes and encode individual scenes. For reference, here are the links to all the parts:">
<meta itemprop="datePublished" content="2019-06-20T00:00:00+00:00" />
<meta itemprop="dateModified" content="2019-06-20T00:00:00+00:00" />
<meta itemprop="wordCount" content="1567">
<meta itemprop="image" content="https://singhkays.com/media/serverless-av1.png">



<meta itemprop="keywords" content="Azure,Azure Functions,Azure Logic Apps,Azure Video Indexer,Azure File Share,Azure Storage,Serverless,AV1,H.265,H.264,x264,Video Codec,Video Encoding," />


<script type="text/javascript">
  window._mNHandle = window._mNHandle || {};
  window._mNHandle.queue = window._mNHandle.queue || [];
  medianet_versionId = "3121199";
</script>
<script src="//contextual.media.net/dmedianet.js?cid=8CUX6J71X" async="async"></script>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<script data-ad-client="ca-pub-8046835310934475" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-JDVREY790Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JDVREY790Z');
</script>
</head>

<body class="" id="top">
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://singhkays.com/" accesskey="h" title="Kay Singh (Alt + H)">
                <img src="/android-chrome-192x192.png" alt="logo" aria-label="logo"
                    height="35">Kay Singh</a>
            <span class="logo-switches">
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://singhkays.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/index.xml" title="RSS Feed">
                    <span>RSS Feed</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure
    </h1>
    <div class="post-description">
      
    </div>
    <div class="post-meta">

June 20, 2019&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Kay Singh

    </div>
  </header> 
<figure class="entry-cover">
        <img srcset="https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/media/serverless-av1_hu50128734b74bf29ac20ac761b6575f84_112807_360x0_resize_lanczos_2.png 360w ,https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/media/serverless-av1_hu50128734b74bf29ac20ac761b6575f84_112807_480x0_resize_lanczos_2.png 480w ,https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/media/serverless-av1_hu50128734b74bf29ac20ac761b6575f84_112807_720x0_resize_lanczos_2.png 720w ,https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/media/serverless-av1_hu50128734b74bf29ac20ac761b6575f84_112807_1080x0_resize_lanczos_2.png 1080w ,https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/media/serverless-av1_hu50128734b74bf29ac20ac761b6575f84_112807_1500x0_resize_lanczos_2.png 1500w ,https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/media/serverless-av1.png 2771w"
            sizes="(min-width: 768px) 720px, 100vw" src="https://singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/media/serverless-av1.png" alt="" />
        
</figure>


  
  <h3 style="text-align:center"> Subscribe to get updates in your inbox! I'm also on Twitter @<a style="text-decoration: underline;" href="https://twitter.com/singhkays" target="_blank">singhkays</a></h3>
  <script async data-uid="75bd47613f" src="https://winning-builder-7776.ck.page/75bd47613f/index.js"></script>

  <div class="post-content">
<p>This is a 3-part blog covering how to build a scalable shot-based serverless video encoder in Azure. In Part 1, I explain what AV1 is and where we are in the video encoding space. In part 2, we create a logic app to upload and index the video. In part 3, we&rsquo;ll need to split the video into its scenes and encode individual scenes. For reference, here are the links to all the parts:</p>
<ol>
<li><a href="https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/">https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-1/</a></li>
<li><a href="https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-2/">https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-2/</a></li>
<li><a href="https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-3/">https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-3/</a></li>
</ol>
<h2 id="streaming-video-takes-center-stage">Streaming video takes center stage<a hidden class="anchor" aria-hidden="true" href="#streaming-video-takes-center-stage">#</a></h2>
<p>Streaming video has now become the main source of content consumption for many consumers. The number of consumers paying for streaming video services has skyrocketed in recent years. <a href="https://www2.deloitte.com/us/en/pages/about-deloitte/articles/press-releases/digital-media-trends-thirteenth-edition.html">A recent survey by Deloitte</a> concluded that for the first time more US consumers pay for streaming video services (69%) than they do for cable or satellite TV (65%). It is not surprising that streaming video has taken over given the excellent ad-free user experience.</p>
<p>The key component to making streaming video possible is the internet bandwidth because the quality of video being streamed is directly proportional to number of bits used to represent the pixels in the video i.e. bitrate. Therefore, a video with a higher resolution (i.e. larger number of pixels) requires a higher bitrate which translates to the user needing more bandwidth to stream the video successfully. To make this business model work without requiring every user to sign up for the highest speed internet plan, streaming video providers rely on video compression codecs such as H.264, VP9, H.265 etc. These codecs allow delivery of physical media (Blu-ray) like quality when viewed at normal TV -&gt; couch distances for a fraction of the bitrate.</p>
<h2 id="theres-a-problem-in-paradise">There&rsquo;s a problem in paradise<a hidden class="anchor" aria-hidden="true" href="#theres-a-problem-in-paradise">#</a></h2>
<p>The video compression space is always evolving due to the constraints placed by available internet bandwidth especially in mobile scenarios. The most popular video codec in use today is AVC/H.264 codec which is owned by the Motion Picture Experts Group (MPEG). Before a content creator can distribute video in H.264 format It&rsquo;s successor H.265 was approved in 2013 and expected to offer about 25% to 50% bitrate savings for the same quality. However, H.265 has not been able to capture the market in the same way H.264 did due to its patent licensing fees which can be as high as $25 million annually. Youtube is one of the most notable streaming properties to skip H.265 adoption and rely on Google&rsquo;s own VP9 codec. When one of the top video streaming sites doesn&rsquo;t adopt the latest and greatest, you know there&rsquo;s a problem!</p>
<!-- raw HTML omitted -->
<h2 id="a-problem-is-just-an-opportunity">A problem is just an opportunity!<a hidden class="anchor" aria-hidden="true" href="#a-problem-is-just-an-opportunity">#</a></h2>
<p>In 2015, a bunch of internet, content creator and browser companies realized this problem and formed the Alliance for Open Media (AOMedia) which features some of the biggest names including Amazon, Apple, ARM, Cisco, Facebook, Google, IBM, Intel, Microsoft, Netflix and NVIDIA. The first order of business for AOMedia consortium is to deliver a state-of-the-art codec that is also royalty free. AV1, released in 2018 fulfills that vision and promises to deliver 30% better compression than H.265! Youtube has already started testing videos with AV1 through its <a href="https://www.youtube.com/testtube">TestTube page</a>. Netflix has also shown support for AV1 by calling it <a href="http://www.csimagazine.com/csi/Netflix-AV1-is-our-primary-next-gen-codec.php">&ldquo;our primary next-gen codec&rdquo;</a>.</p>
<p><img src="media/codec-generations.png" alt="av1 h265 h264 vp9 video codec generations"></p>
<div class='align-center'>
  <em>Video codecs generations diagram by Tsahi Levent-Levi (<a href="https://webrtcglossary.com/av1/">source</a>)</em>
</div>

<p><!-- raw HTML omitted -->
AV1 is based largely on Google&rsquo;s VP9 codec and incorporates tools and technologies from Mozilla&rsquo;s Daala, Cisco&rsquo;s Thor, and Google&rsquo;s VP10 codecs. In its current form, <a href="https://www.streamingmedia.com/Articles/ReadArticle.aspx?ArticleID=130284">the AV1 encoder is quite slow</a> compared to existing H.265 &amp; H.264 encoders. But there are <a href="https://people.xiph.org/~xiphmont/aom/987329874327293.html">efforts underway by folks at Mozilla and Xiph</a> to build an AV1 encoder that&rsquo;s focused purely on speed from scratch &ndash; rav1e!</p>
<h2 id="shots-shots-shots">Shots, Shots, Shots!<a hidden class="anchor" aria-hidden="true" href="#shots-shots-shots">#</a></h2>
<p>Until the encoding speed of the AV1 encoders fares better when compared to existing encoders, this proof of concept introduces a potential way to speed up the overall encoding tasks. It does this by splitting the input video into &ldquo;shots&rdquo; and is inspired by <a href="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f">Netflix&rsquo;s approach to parallelizing their video encoding process</a>. &ldquo;Shots&rdquo; as Netflix describes are &ndash; <em>&ldquo;portions of video with a relatively short duration, coming from the same camera under fairly constant lighting and environment conditions. It captures the same or similar visual content, for example, the face of an actor standing in front of a tree and &mdash; most important &mdash; it is uniform in its behavior when changing coding parameters.&quot;</em></p>
<!-- raw HTML omitted -->
<h2 id="the-solution">The solution<a hidden class="anchor" aria-hidden="true" href="#the-solution">#</a></h2>
<p><em>Strap in! This is going to be a long one!</em></p>
<h6 id="tldr">TL;DR<a hidden class="anchor" aria-hidden="true" href="#tldr">#</a></h6>
<p>To implement this solution, we need an algorithm that splits the input video into shots. Fortunately for us, <a href="https://vi.microsoft.com/en-us/">Microsoft Video Indexer</a> supports this scenario. Before getting started we&rsquo;ll setup Video Indexer in our subscription. For the rest of the steps, here&rsquo;s a quick overview of what&rsquo;s going to happen:</p>
<p><img src="media/architecture.png" alt="&ldquo;shot-based&rdquo; serverless distributed AV1 video encoder in Azure"></p>
<ol>
<li>User uploads an MP4 video file to Azure Blob Storage</li>
<li>Because of the Azure Event Grid integration with Azure Blob Storage, a file upload event triggers a notification</li>
<li>The event notification is consumed by the first Logic App. The first step in the Logic App is to upload the video to Microsoft Video Indexer service</li>
<li>Once the video is indexed, we retrieve the video insights and store it in the &ldquo;insights&rdquo; Azure File share</li>
<li>While the video indexing is happening, we also copy the video file from Azure Blob Storage to the &ldquo;source&rdquo; Azure File share where it can be accessed by container instances later</li>
<li>When the indexing is complete, an &ldquo;Indexing complete&rdquo; notification is sent to trigger the second Logic App</li>
<li>In the second Logic App, the first step is to retrieve the video insights saved earlier</li>
<li>Next, we use an Azure Function to parse the shots data and create our container instance definitions as well as shots encoding commands for each container instance</li>
<li>Now we can use the Logic App-Container Instance connector to create container instances based on container instance definitions defined in the last step</li>
<li>As the container instances finish their respective encoding jobs, they save the output video in the &ldquo;shots&rdquo; Azure File share</li>
<li>Next, we trigger another Azure Function to iterate over the output files and create a <a href="https://trac.ffmpeg.org/wiki/Concatenate#demuxer">ffmpeg concat file</a></li>
<li>Once we have a concat file, we create another container instance with ffmpeg installed to execute the concat file</li>
<li>The output of the preview container instance i.e. all the encoded shots files that are combined to one file is saved in the &ldquo;output&rdquo; Azure File share</li>
<li>The user can then download the encoded file from the &ldquo;output&rdquo; Azure File share</li>
</ol>
<!-- raw HTML omitted -->
<h6 id="user-experience">User Experience<a hidden class="anchor" aria-hidden="true" href="#user-experience">#</a></h6>
<p>While building this solution, I wanted to keep the user experience simple. Hence a user needs to take only these steps:</p>
<ol>
<li>Upload an MP4 video file to a specified Azure Blob Storage Account</li>
<li>Download the encoded file from the &ldquo;output&rdquo; Azure File share</li>
</ol>
<h2 id="results">Results<a hidden class="anchor" aria-hidden="true" href="#results">#</a></h2>
<p>Below are the results of the speedup I was able to achieve using this solution. Continue on to Parts 2 &amp; 3 to see how to build this solution.</p>
<h4 id="test-setup">Test setup<a hidden class="anchor" aria-hidden="true" href="#test-setup">#</a></h4>
<ul>
<li>To obtain these results I used the following docker image with a build of libaom AV1 <a href="https://hub.docker.com/r/offbytwo/ffmpeg">https://hub.docker.com/r/offbytwo/ffmpeg</a></li>
<li>Parallelism - 50x i.e. only 50 shots were encoding concurrently at any given time</li>
</ul>
<p>Here is the total time it took to run the pipeline in each of the cases. If you look at the absolute total time, the improvement is ~7x with a 50x parallelisation factor. With a higher number of concurrent encodes, this number would be greater. However, in the case of shot-based encoding solution, there&rsquo;s a <em>big caveat below that needs to be considered</em>.</p>
<h4 id="absolute-numbers">Absolute numbers<a hidden class="anchor" aria-hidden="true" href="#absolute-numbers">#</a></h4>
<table>
<thead>
<tr>
<th>Encoder type</th>
<th>Time</th>
</tr>
</thead>
<tbody>
<tr>
<td>Shot-based encoder (50x parallel)</td>
<td>~3 hrs*</td>
</tr>
<tr>
<td>Linear encoding</td>
<td>21.8 hrs</td>
</tr>
</tbody>
</table>
<p>* - <em>The times you see above are the total times it took for the pipeline to complete. In the shot-based solution the longest time it took to encode was 3 hours for shot 141 which were the credits. The total length of this shot was 1 minute 17 seconds. If you ignore this scene, then majority of the shots completed in less than 45 minutes</em></p>
<h4 id="percentiles">Percentiles<a hidden class="anchor" aria-hidden="true" href="#percentiles">#</a></h4>
<p>I&rsquo;ve also plotted calculated the time taken to encode at various percentiles as shows below so we get a better idea of what the speedup is at these different data points. One example from the below data is the median (P50) speedup is 145x and at P99 the speedup is 20x!</p>
<table>
<thead>
<tr>
<th>Percentile</th>
<th>Time (minutes)</th>
<th>Speedup</th>
</tr>
</thead>
<tbody>
<tr>
<td>50</td>
<td>9</td>
<td>145x</td>
</tr>
<tr>
<td>67</td>
<td>18</td>
<td>73x</td>
</tr>
<tr>
<td>90</td>
<td>37</td>
<td>35x</td>
</tr>
<tr>
<td>95</td>
<td>46</td>
<td>29x</td>
</tr>
<tr>
<td>99</td>
<td>66</td>
<td>20x</td>
</tr>
<tr>
<td>100</td>
<td>181</td>
<td>7x</td>
</tr>
</tbody>
</table>
<p><img src="media/percentile-speedup-chart.png" alt="Speed up of encoding vs percentile"></p>
<h4 id="scatter-plot-of-time-distribution">Scatter Plot of time distribution<a hidden class="anchor" aria-hidden="true" href="#scatter-plot-of-time-distribution">#</a></h4>
<p>Here is a scatter plot distribution of shot # vs the time taken to encode.</p>
<p><img src="media/scatter-plot-shot-vs-time.png" alt="scalable distributed av1 serverless encoder azure scatter plot shot # vs time taken"></p>
<p><strong>NOTE:</strong> Because of the 50X parallelisation factor, majority shots #s &lt; 50, spent around 10 minutes in queue waiting to begin encoding. The time here represents the total of time spent in queue + encoding time. If we increased the parallelisation factor and reduced the time spent in queue, then the distribution of time taken for shot #s &lt; 50 would resemble those with shot # &gt; 50.</p>
<p>To view the details and timecodes of the shots, view this JSON file</p>
<ul>
<li><a href="https://github.com/singhkays/av1-serverless-shot-based-transcoder-azure/blob/master/tears-of-steel-shots-timecodes.json">https://github.com/singhkays/av1-serverless-shot-based-transcoder-azure/blob/master/tears-of-steel-shots-timecodes.json</a></li>
</ul>
<h2 id="end-of-part-1">End of Part 1<a hidden class="anchor" aria-hidden="true" href="#end-of-part-1">#</a></h2>
<p>This is the end of Part 1. In Part 2, I will walk through step by step on how to implement this solution.</p>
<ul>
<li><a href="https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-2/">https://www.singhkays.com/blog/azure-serverless-distributed-video-encoder-av1-part-2/</a></li>
</ul>
<h2 id="av1-resources">AV1 resources<a hidden class="anchor" aria-hidden="true" href="#av1-resources">#</a></h2>
<ul>
<li><a href="https://www.singhkays.com/blog/av1-wiki-resources-tools/">AV1 Resource Central: Videos, Tools, Presentations, Comparisons, Research Papers, Encoders, Decoders</a></li>
<li><a href="https://www.singhkays.com/blog/its-time-replace-gifs-with-av1-video/">It&rsquo;s time to replace GIFs with AV1 video!</a></li>
</ul>
<h2 id="contact">Contact<a hidden class="anchor" aria-hidden="true" href="#contact">#</a></h2>
<p>Reach out if you have any questions! Feel free to follow me on</p>
<ul>
<li>Twitter - <a href="https://twitter.com/singhkays">@singhkays</a></li>
<li>LinkedIn - <a href="https://www.linkedin.com/in/singhkays/">https://www.linkedin.com/in/singhkays/</a></li>
</ul>

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://singhkays.com/tags/azure/">Azure</a></li>
      <li><a href="https://singhkays.com/tags/azure-functions/">Azure Functions</a></li>
      <li><a href="https://singhkays.com/tags/azure-logic-apps/">Azure Logic Apps</a></li>
      <li><a href="https://singhkays.com/tags/azure-video-indexer/">Azure Video Indexer</a></li>
      <li><a href="https://singhkays.com/tags/azure-file-share/">Azure File Share</a></li>
      <li><a href="https://singhkays.com/tags/azure-storage/">Azure Storage</a></li>
      <li><a href="https://singhkays.com/tags/serverless/">Serverless</a></li>
      <li><a href="https://singhkays.com/tags/av1/">AV1</a></li>
      <li><a href="https://singhkays.com/tags/h.265/">H.265</a></li>
      <li><a href="https://singhkays.com/tags/h.264/">H.264</a></li>
      <li><a href="https://singhkays.com/tags/x264/">x264</a></li>
      <li><a href="https://singhkays.com/tags/video-codec/">Video Codec</a></li>
      <li><a href="https://singhkays.com/tags/video-encoding/">Video Encoding</a></li>
    </ul>
    <nav class="paginav">
      <a class="prev" href="https://singhkays.com/blog/av1-ecosystem-update-june-2019/">
        <span class="title">« Prev Page</span>
        <br>
        <span>AV1 Ecosystem Update: June 2019</span>
      </a>
      <a class="next" href="https://singhkays.com/blog/av1-ecosystem-update-may-2019/">
        <span class="title">Next Page »</span>
        <br>
        <span>AV1 Ecosystem Update: May 2019</span>
      </a>
    </nav>






<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure on twitter"
        href="https://twitter.com/intent/tweet/?text=Part%201%3a%20Building%20a%20scalable%20%27shot-based%27%20serverless%20AV1%20video%20encoder%20in%20Azure&amp;url=https%3a%2f%2fsinghkays.com%2fblog%2fazure-serverless-distributed-video-encoder-av1-part-1%2f&amp;hashtags=Azure%2cAzureFunctions%2cAzureLogicApps%2cAzureVideoIndexer%2cAzureFileShare%2cAzureStorage%2cServerless%2cAV1%2cH.265%2cH.264%2cx264%2cVideoCodec%2cVideoEncoding">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsinghkays.com%2fblog%2fazure-serverless-distributed-video-encoder-av1-part-1%2f&amp;title=Part%201%3a%20Building%20a%20scalable%20%27shot-based%27%20serverless%20AV1%20video%20encoder%20in%20Azure&amp;summary=Part%201%3a%20Building%20a%20scalable%20%27shot-based%27%20serverless%20AV1%20video%20encoder%20in%20Azure&amp;source=https%3a%2f%2fsinghkays.com%2fblog%2fazure-serverless-distributed-video-encoder-av1-part-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fsinghkays.com%2fblog%2fazure-serverless-distributed-video-encoder-av1-part-1%2f&title=Part%201%3a%20Building%20a%20scalable%20%27shot-based%27%20serverless%20AV1%20video%20encoder%20in%20Azure">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsinghkays.com%2fblog%2fazure-serverless-distributed-video-encoder-av1-part-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure on whatsapp"
        href="https://api.whatsapp.com/send?text=Part%201%3a%20Building%20a%20scalable%20%27shot-based%27%20serverless%20AV1%20video%20encoder%20in%20Azure%20-%20https%3a%2f%2fsinghkays.com%2fblog%2fazure-serverless-distributed-video-encoder-av1-part-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Part 1: Building a scalable &#39;shot-based&#39; serverless AV1 video encoder in Azure on telegram"
        href="https://telegram.me/share/url?text=Part%201%3a%20Building%20a%20scalable%20%27shot-based%27%20serverless%20AV1%20video%20encoder%20in%20Azure&amp;url=https%3a%2f%2fsinghkays.com%2fblog%2fazure-serverless-distributed-video-encoder-av1-part-1%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>


</article>
    </main><footer class="footer">
    <span>Copyright © 2017–2021, Kay Singh; all rights reserved.</span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script defer src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>

</body>

</html>
