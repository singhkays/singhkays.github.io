<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR - KAY SINGH</title>

<meta name="description" content="Video encoding has always been a fairly compute intensive task. With every new generation of video encoders, more computational power has been required to achieve the compression benefits. HEVC/H.265 is the latest state of the art video compression standard with x265 being the most popular open-source encoder used for encoding into the HEVC/H.265 format. In comparison to AVC/H.264 (the previous state of the art encoding format), HEVC offers about double the data compression ratio at the same level of video quality, or substantially improved video quality at the same bit rate.">
<meta name="keywords" content= />
<meta name="author" content="Kay Singh">
<link rel="canonical" href="https://singhkays.com/blog/x265-128-core-scaling-4k-hevc-hdr-azure-vm/" />


<link href="https://singhkays.com/assets/css/stylesheet.min.f7eafea2d338934723d34b25e85ca2adf9687a98f3e3b7ade053b29d5af63e12.css" integrity="sha256-9&#43;r&#43;otM4k0cj00sl6Fyirfloepjz47et4FOynVr2PhI=" rel="preload stylesheet"
    as="style">




<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">

<meta name="generator" content="Hugo 0.80.0" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-108462543-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://singhkays.com/blog/x265-128-core-scaling-4k-hevc-hdr-azure-vm/./media/average-cpu-2-3-4-encodes.png"/>
<meta name="twitter:title" content="Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR"/>
<meta name="twitter:description" content="Video encoding has always been a fairly compute intensive task. With every new generation of video encoders, more computational power has been required to achieve the compression benefits. HEVC/H.265 is the latest state of the art video compression standard with x265 being the most popular open-source encoder used for encoding into the HEVC/H.265 format. In comparison to AVC/H.264 (the previous state of the art encoding format), HEVC offers about double the data compression ratio at the same level of video quality, or substantially improved video quality at the same bit rate."/>

<meta property="og:title" content="Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR" />
<meta property="og:description" content="Video encoding has always been a fairly compute intensive task. With every new generation of video encoders, more computational power has been required to achieve the compression benefits. HEVC/H.265 is the latest state of the art video compression standard with x265 being the most popular open-source encoder used for encoding into the HEVC/H.265 format. In comparison to AVC/H.264 (the previous state of the art encoding format), HEVC offers about double the data compression ratio at the same level of video quality, or substantially improved video quality at the same bit rate." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://singhkays.com/blog/x265-128-core-scaling-4k-hevc-hdr-azure-vm/" />

    
        
        
        
            <meta name="og:image" content="https://singhkays.com/blog/x265-128-core-scaling-4k-hevc-hdr-azure-vm/./media/average-cpu-2-3-4-encodes.png"/>
        
    


    
        <meta property="article:published_time" content="2018-08-19T13:52:28-07:00"/>
    
    
        <meta property="article:modified_time" content="2018-08-19T13:52:28-07:00"/>
    




    <meta property="og:site_name" content="Kay&#39;s Blog" />







    



<meta itemprop="name" content="Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR">
<meta itemprop="description" content="Video encoding has always been a fairly compute intensive task. With every new generation of video encoders, more computational power has been required to achieve the compression benefits. HEVC/H.265 is the latest state of the art video compression standard with x265 being the most popular open-source encoder used for encoding into the HEVC/H.265 format. In comparison to AVC/H.264 (the previous state of the art encoding format), HEVC offers about double the data compression ratio at the same level of video quality, or substantially improved video quality at the same bit rate.">
<meta itemprop="datePublished" content="2018-08-19T13:52:28-07:00" />
<meta itemprop="dateModified" content="2018-08-19T13:52:28-07:00" />
<meta itemprop="wordCount" content="1102">
<meta itemprop="image" content="https://singhkays.com/media/average-cpu-2-3-4-encodes.png">



<meta itemprop="keywords" content="Codecs,Video Encoding,x265,HEVC,H.265,HDR,4K,UHD,Video Compression," />


<script type="text/javascript">
  window._mNHandle = window._mNHandle || {};
  window._mNHandle.queue = window._mNHandle.queue || [];
  medianet_versionId = "3121199";
</script>
<script src="//contextual.media.net/dmedianet.js?cid=8CUX6J71X" async="async"></script>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<script data-ad-client="ca-pub-8046835310934475" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-JDVREY790Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JDVREY790Z');
</script>
</head>

<body class="" id="top">
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://singhkays.com/" accesskey="h" title="Kay Singh (Alt + H)">
                <img src="/android-chrome-192x192.png" alt="logo" aria-label="logo"
                    height="35">Kay Singh</a>
            <span class="logo-switches">
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://singhkays.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://singhkays.com/index.xml" title="RSS Feed">
                    <span>RSS Feed</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR
    </h1>
    <div class="post-description">
      
    </div>
    <div class="post-meta">

August 19, 2018&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Kay Singh

    </div>
  </header> 


  
  <h3 style="text-align:center"> Subscribe to get updates in your inbox! I'm also on Twitter @<a style="text-decoration: underline;" href="https://twitter.com/singhkays" target="_blank">singhkays</a></h3>
  <script async data-uid="75bd47613f" src="https://winning-builder-7776.ck.page/75bd47613f/index.js"></script>

  <div class="post-content">
<p>Video encoding has always been a fairly compute intensive task. With every new generation of video encoders, more computational power has been required to achieve the compression benefits. <a href="https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding">HEVC/H.265</a> is the latest state of the art video compression standard with <a href="https://en.wikipedia.org/wiki/X265">x265</a> being the most popular open-source encoder used for encoding into the HEVC/H.265 format. In comparison to AVC/H.264 <em>(the previous state of the art encoding format),</em> HEVC offers about double the data compression ratio at the same level of video quality, or substantially improved video quality at the same bit rate.</p>
<p>To achieve the increased compression, the x265 encoder also requires more processing power than the x264 encoder. Throwing more CPU cores at this problem usually provides a linear gain in the encoding speed. However, in the consumer CPU space we&rsquo;ve been limited to 4-6 cores for almost a decade now. Intel first introduced a Quad core CPU in 2006, followed by a 6 core CPU in 2010. Only recently in the last few years have we seen the introduction of 8+ core CPUs in the consumer space. With the recent introduction of AMD 16 &amp; 32 core Threadripper CPUs and the competing announcements from Intel, we&rsquo;re seeing a resurgence of competition in the multi-core space. It is a very exciting time to be a hardware enthusiast with the return of AMD to high-end CPU market! :)</p>
<h2 id="azure-m-series-vms">Azure M-series VMs<a hidden class="anchor" aria-hidden="true" href="#azure-m-series-vms">#</a></h2>
<p>While these 16 &amp; 32 core parts might be out of the reach of many consumers due to their price, it is still interesting for me to test how current x265 encoder scales with a large number of cores. With a cloud like <a href="https://azure.microsoft.com/en-us/">Microsoft Azure</a>, it&rsquo;s very easy to spin up a VM with many cores to complete this test. For this test, I&rsquo;m going to be using the <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes-memory#m-series">Azure M-series VMs</a>. As of August 2018, M-series offers the largest VM in Azure with up to 128 cores.</p>
<p>Here are the important specs on the M-series VMs:</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>Size</strong></th>
<th style="text-align:center"><strong>vCPU</strong></th>
<th style="text-align:center"><strong>Memory: GiB</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Standard_M8ms</td>
<td style="text-align:center">8</td>
<td style="text-align:center">218.75</td>
</tr>
<tr>
<td style="text-align:center">Standard_M16ms</td>
<td style="text-align:center">16</td>
<td style="text-align:center">437.5</td>
</tr>
<tr>
<td style="text-align:center">Standard_M32ms</td>
<td style="text-align:center">32</td>
<td style="text-align:center">875</td>
</tr>
<tr>
<td style="text-align:center">Standard_M64ms</td>
<td style="text-align:center">64</td>
<td style="text-align:center">1,792</td>
</tr>
<tr>
<td style="text-align:center">Standard_M128ms</td>
<td style="text-align:center">128</td>
<td style="text-align:center">3,892</td>
</tr>
</tbody>
</table>
<p>Here is the <code>lscpu</code> output from the <strong>Standard_M128ms VM</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">kay@mvmssl4ct000001:~$ lscpu
Architecture:          x86_64
CPU op-mode<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:        32-bit, 64-bit
Byte Order:            Little Endian
CPU<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:                <span style="color:#ae81ff">128</span>
On-line CPU<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> list:   0-127
Thread<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> per core:    <span style="color:#ae81ff">2</span>
Core<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> per socket:    <span style="color:#ae81ff">16</span>
Socket<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:             <span style="color:#ae81ff">4</span>
NUMA node<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:          <span style="color:#ae81ff">4</span>
Vendor ID:             GenuineIntel
CPU family:            <span style="color:#ae81ff">6</span>
Model:                 <span style="color:#ae81ff">63</span>
Model name:            Intel<span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> Xeon<span style="color:#f92672">(</span>R<span style="color:#f92672">)</span> CPU E7-8890 v3 @ 2.50GHz
Stepping:              <span style="color:#ae81ff">4</span>
CPU MHz:               2493.989
BogoMIPS:              4988.10
Virtualization:        VT-x
Hypervisor vendor:     Microsoft
Virtualization type:   full
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              46080K
NUMA node0 CPU<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:     0-31
NUMA node1 CPU<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:     32-63
NUMA node2 CPU<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:     64-95
NUMA node3 CPU<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:     96-127
Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq vmx ssse3 fma cx16 pcid sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand hypervisor lahf_lm abm invpcid_single pti tpr_shadow vnmi ept vpid fsgsbase bmi1 hle avx2 smep bmi2 erms invpcid rtm xsaveopt
</code></pre></div><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="test-setup">Test setup<a hidden class="anchor" aria-hidden="true" href="#test-setup">#</a></h2>
<ul>
<li>Ubuntu 16.04 LTS</li>
<li>Intel(R) Xeon(R) CPU E7-8890 v3 @ 2.50GHz <em>(Azure M-series VMs in the table above)</em></li>
<li>FFmpeg 4.0.2 64-bit static build</li>
<li>Test file - <a href="http://hdrsamples.com/life-of-pi-4k-uhd-hdr-sample-footage/">Life of Pi Ultra HD HDR sample (54s)</a></li>
</ul>
<h4 id="mediainfo">Mediainfo<a hidden class="anchor" aria-hidden="true" href="#mediainfo">#</a></h4>
<p>Here are the media details of the test sample</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">kay@mvmssl4ct000001:~/ffmpeg-4.0.2-64bit-static$ mediainfo Life_of_<span style="color:#ae81ff">\ </span>Pi_draft_Ultra-HD_HDR.mp4
General
Complete name                            : Life_of_ Pi_draft_Ultra-HD_HDR.mp4
Format                                   : MPEG-4
Commercial name                          : HDR10
Format profile                           : Base Media
Codec ID                                 : isom <span style="color:#f92672">(</span>isom/iso2/mp41<span style="color:#f92672">)</span>
File size                                : <span style="color:#ae81ff">293</span> MiB
Duration                                 : <span style="color:#ae81ff">54</span> s <span style="color:#ae81ff">422</span> ms
Overall bit rate mode                    : Variable
Overall bit rate                         : 45.1 Mb/s
Writing application                      : Lavf56.15.103

Video
ID                                       : <span style="color:#ae81ff">1</span>
Format                                   : HEVC
Format/Info                              : High Efficiency Video Coding
Commercial name                          : HDR10
Format profile                           : Main 10@L5.1@High
Codec ID                                 : hev1
Codec ID/Info                            : High Efficiency Video Coding
Duration                                 : <span style="color:#ae81ff">54</span> s <span style="color:#ae81ff">375</span> ms
Bit rate                                 : 44.8 Mb/s
Width                                    : <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">840</span> pixels
Height                                   : <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">160</span> pixels
Display aspect ratio                     : 16:9
Frame rate mode                          : Constant
Frame rate                               : 24.000 FPS
Original frame rate                      : 23.976 <span style="color:#f92672">(</span>24000/1001<span style="color:#f92672">)</span> FPS
Color space                              : YUV
Chroma subsampling                       : 4:2:0 <span style="color:#f92672">(</span>Type 2<span style="color:#f92672">)</span>
Bit depth                                : <span style="color:#ae81ff">10</span> bits
Bits/<span style="color:#f92672">(</span>Pixel*Frame<span style="color:#f92672">)</span>                       : 0.225
Stream size                              : <span style="color:#ae81ff">290</span> MiB <span style="color:#f92672">(</span>99%<span style="color:#f92672">)</span>
Writing library                          : ATEME Titan KFE 3.7.0 <span style="color:#f92672">(</span>4.7.0.2002<span style="color:#f92672">)</span>
Color range                              : Limited
Color primaries                          : BT.2020
Transfer characteristics                 : PQ
Matrix coefficients                      : BT.2020 non-constant
Mastering display color primaries        : Display P3
Mastering display luminance              : min: 0.0200 cd/m2, max: <span style="color:#ae81ff">1200</span> cd/m2
</code></pre></div><h4 id="ffmpeg-command-used">FFmpeg command used<a hidden class="anchor" aria-hidden="true" href="#ffmpeg-command-used">#</a></h4>
<p>I used the 10-bit version of FFmpeg to encode the file to a HDR compatible output. Very slow preset was used to ensure the most CPU intensive parameters were used (<em>outside of the placebo preset</em> :) ).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">kay@mvmssl4ct000001:~/ffmpeg-4.0.2-64bit-static$ ./ffmpeg-10bit -i <span style="color:#e6db74">&#39;Life_of_ Pi_draft_Ultra-HD_HDR.mp4&#39;</span> -pix_fmt yuv420p10le -profile:v main10 -c:v libx265 -crf <span style="color:#ae81ff">21</span> -preset veryslow -x265-params <span style="color:#e6db74">&#39;no-strong-intra-smoothing=1:no-sao=1:deblock=-2\:-2:colorprim=bt2020:transfer=smpte2084:colormatrix=bt2020nc:range=limited:master-display=G(13250,34500)B(7500,3000)R(34000,16000)WP(15635,16450)L(40000000,50):max-cll=1200,0.0200&#39;</span> -an vslow_crf21.mp4
</code></pre></div><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="results">Results<a hidden class="anchor" aria-hidden="true" href="#results">#</a></h2>
<p><img src="media/time-to-complete-vs-cores.png" alt="128 core scaling x265 HEVC HDR 4K Time to complete vs cores"></p>
<p><img src="media/fps-vs-cores.png" alt="128 core scaling x265 HEVC HDR 4K FPS vs Cores"></p>
<p>Looking at the results above, we see that the time taken to complete the encode decreases nearly linearly until 32 cores. The same is true for the frames encoded per second (FPS). With more than 32 cores, the increase in performance does not scale linearly with the increase in number of cores.</p>
<p>I also looked at the average CPU usage for all the encodes in Azure Portal. Looking at the chart below, you can see that the CPU is close to being 100% utilized with 8 and 16 cores. With 32 cores, the average CPU usage is slightly less than 100%. With 64 and 128 cores, we see a significant decrease in average CPU usage. With 128 cores, the average CPU usage is barely close to 30%! Quite clearly, there is room for improvement when encoding with 64 &amp; 128 cores.</p>
<p><img src="media/vm-average-cpu.png" alt="128 core scaling x265 HEVC HDR 4K FPS vs Cores"></p>
<p>Here is how the CPU usage looks using <code>htop</code> with 1 encode on 128 cores</p>
<p><img src="media/htop-128-cores-1-encode.png" alt="128 core htop 1 encode x265"></p>
<h3 id="improving-cpu-usage">Improving CPU usage<a hidden class="anchor" aria-hidden="true" href="#improving-cpu-usage">#</a></h3>
<p>With 128 cores, there is clearly room for improvement for the x265 encoder. Until we get these improvements, I wanted to see how to fully utilize all 128 cores. For achieving this, I ran the same encode multiple times. Here are the results:</p>
<p><img src="media/time-to-complete-vs-concurrent-encodes.png" alt="Time to Complete vs # of concurrent encodes"></p>
<p><img src="media/FPS-vs-concurrent-encodes.png" alt="FPS vs # of concurrent encodes"></p>
<p>With 4 concurrent encodes, we&rsquo;re getting close to saturating all the 128 cores on this VM.</p>
<p><img src="media/average-cpu-2-3-4-encodes.png" alt="Average CPU usage for concurrent encodes 4k HDR"></p>
<p>And here&rsquo;s the <code>htop</code> view of the CPU usage while running 4 concurrent encodes.</p>
<p><img src="media/htop-4-encodes.png" alt="128 core htop 4 encodes x265 4k HDR"></p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Hopefully, this gives you an idea into current limitations of the x265 encoder and how to best utilize all the available cores. If you have any questions, feel free to reach out to me by leaving a comment below or at one of the below locations:</p>
<ul>
<li>Twitter - <a href="https://twitter.com/singhkays">@singhkays</a></li>
<li>LinkedIn - <a href="https://www.linkedin.com/in/singhkays/">https://www.linkedin.com/in/singhkays/</a></li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://singhkays.com/tags/codecs/">Codecs</a></li>
      <li><a href="https://singhkays.com/tags/video-encoding/">Video Encoding</a></li>
      <li><a href="https://singhkays.com/tags/x265/">x265</a></li>
      <li><a href="https://singhkays.com/tags/hevc/">HEVC</a></li>
      <li><a href="https://singhkays.com/tags/h.265/">H.265</a></li>
      <li><a href="https://singhkays.com/tags/hdr/">HDR</a></li>
      <li><a href="https://singhkays.com/tags/4k/">4K</a></li>
      <li><a href="https://singhkays.com/tags/uhd/">UHD</a></li>
      <li><a href="https://singhkays.com/tags/video-compression/">Video Compression</a></li>
    </ul>






<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR on twitter"
        href="https://twitter.com/intent/tweet/?text=Testing%20x265%20encoder%20scaling%20on%20a%20128%20core%20Azure%20VM%20for%204K%20HDR&amp;url=https%3a%2f%2fsinghkays.com%2fblog%2fx265-128-core-scaling-4k-hevc-hdr-azure-vm%2f&amp;hashtags=Codecs%2cVideoEncoding%2cx265%2cHEVC%2cH.265%2cHDR%2c4K%2cUHD%2cVideoCompression">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsinghkays.com%2fblog%2fx265-128-core-scaling-4k-hevc-hdr-azure-vm%2f&amp;title=Testing%20x265%20encoder%20scaling%20on%20a%20128%20core%20Azure%20VM%20for%204K%20HDR&amp;summary=Testing%20x265%20encoder%20scaling%20on%20a%20128%20core%20Azure%20VM%20for%204K%20HDR&amp;source=https%3a%2f%2fsinghkays.com%2fblog%2fx265-128-core-scaling-4k-hevc-hdr-azure-vm%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fsinghkays.com%2fblog%2fx265-128-core-scaling-4k-hevc-hdr-azure-vm%2f&title=Testing%20x265%20encoder%20scaling%20on%20a%20128%20core%20Azure%20VM%20for%204K%20HDR">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsinghkays.com%2fblog%2fx265-128-core-scaling-4k-hevc-hdr-azure-vm%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR on whatsapp"
        href="https://api.whatsapp.com/send?text=Testing%20x265%20encoder%20scaling%20on%20a%20128%20core%20Azure%20VM%20for%204K%20HDR%20-%20https%3a%2f%2fsinghkays.com%2fblog%2fx265-128-core-scaling-4k-hevc-hdr-azure-vm%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Testing x265 encoder scaling on a 128 core Azure VM for 4K HDR on telegram"
        href="https://telegram.me/share/url?text=Testing%20x265%20encoder%20scaling%20on%20a%20128%20core%20Azure%20VM%20for%204K%20HDR&amp;url=https%3a%2f%2fsinghkays.com%2fblog%2fx265-128-core-scaling-4k-hevc-hdr-azure-vm%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>


</article>
    </main><footer class="footer">
    <span>Copyright © 2017–2021, Kay Singh; all rights reserved.</span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script defer src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.replaceState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>

</body>

</html>
